{
  "packages":[
    "github.com/wolferton/87rb/87rb-api/endpoint",
    "github.com/wolferton/87rb/87rb-api/dao",
    "github.com/wolferton/quilt/facility/httpserver"
  ],

  "components": {
    "jobDao": {
      "type": "dao.JobDao",
      "Accessor": "ref:quiltDatabaseAccessor"
    },
    "databaseProvider": {
      "type": "dao.PostgreSQLCoreDatabaseProvider",
      "ConnectionString": "conf:database.core.connectionString"
    },

    "postJobProvider": {
      "type": "httpserver.JsonHandler",
      "HttpMethod": "POST",
      "PathMatchPattern": "/job",
      "Logic": "ref:postJobLogic",
      "ResponseWriter": "ref:quiltJsonResponseWriter",
      "ErrorResponseWriter": "ref:quiltJsonErrorResponseWriter",
      "Unmarshaller": "ref:quiltJsonUnmarshaller"
    },

    "postJobLogic": {
      "type": "endpoint.PostJobLogic",
      "JobDao": "ref:jobDao"
    },

    "healthCheckProvider": {
      "type": "httpserver.JsonHandler",
      "HttpMethod": "GET",
      "PathMatchPattern": "/health-check",
      "Logic": "ref:healthCheckLogic",
      "ResponseWriter": "ref:quiltJsonResponseWriter",
      "ErrorResponseWriter": "ref:quiltJsonErrorResponseWriter",
      "Unmarshaller": "ref:quiltJsonUnmarshaller"
    },
    "healthCheckLogic": {
      "type": "endpoint.GetHealthCheckLogic"
    }
  }
}
