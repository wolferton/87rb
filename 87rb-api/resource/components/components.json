{
  "packages":[
    "github.com/wolferton/87rb/87rb-api/endpoint",
    "github.com/wolferton/87rb/87rb-api/dao",
    "github.com/wolferton/quilt/facility/httpserver"
  ],

  "components": {

    "jobEndpoint":{
      "type": "httpserver.HttpEndPoint",
      "MethodPatterns": {
        "POST": "/job"
      },
      "Handler": "ref:postJobHandler"
    },

    "postJobHandler":{
      "type": "endpoint.PostJobHandler",
      "JobDao": "ref:jobDao"
    },

    "coreDatabase": {
      "type": "dao.PostgreSQLCoreDatabaseProvider",
      "ConnectionString": "conf:database.core.connectionString"
    },

    "jobDao": {
      "type": "dao.JobDao",
      "Accessor": "ref:quiltDatabaseAccessor"
    },

    "databaseProvider":{
      "type": "dao.PostgreSQLCoreDatabaseProvider",
      "ConnectionString": "conf:database.core.connectionString"
    },

    "healthCheckEndpoint": {
      "type": "httpserver.HttpEndPoint",
      "MethodPatterns": {
        "GET": "/health-check"
      },
      "Handler": "ref:getHealthCheckHandler"
    },

    "getHealthCheckHandler":{
      "type": "endpoint.GetHealthCheckHandler"
    }
  }
}
